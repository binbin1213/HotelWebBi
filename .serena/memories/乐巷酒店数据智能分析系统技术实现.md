# 乐巷酒店数据智能分析系统技术实现

## 核心技术栈

### 后端
- **框架**：Flask 3.x
- **数据库**：SQLite3
- **数据处理**：pandas, numpy
- **AI接口**：OpenAI API, DeepSeek API

### 前端
- **UI框架**：TailwindCSS
- **交互**：JavaScript, jQuery
- **可视化**：ECharts 5.4.3
- **表格处理**：DataTables

### 部署
- **容器化**：Docker, docker-compose
- **服务器**：支持Linux/Windows/macOS

## 项目文件结构
```
/hotel/                   <-- 项目根目录
|-- app.py                <-- 后端核心程序，Flask应用服务器
|-- ai_service.py         <-- AI服务模块，处理自然语言查询
|-- README.md             <-- 项目基本说明
|-- 乐巷酒店数据智能分析系统 - 综合文档.md <-- 系统综合文档
|-- hotel_revenue.db      <-- SQLite数据库文件
|-- Dockerfile            <-- Docker构建文件
|-- docker-compose.yml    <-- Docker Compose配置
|-- requirements.txt      <-- Python依赖列表
|-- templates/            <-- Flask HTML模板
|   |-- base.html         <-- 基础模板
|   |-- home.html         <-- 首页模板
|   |-- index.html        <-- 数据录入页
|   |-- view_data.html    <-- 数据查看页
|   `-- analytics.html    <-- 数据分析页
|-- static/               <-- 静态资源
|   |-- css/              <-- 样式文件
|   |-- js/               <-- JavaScript脚本
|   `-- img/              <-- 图片资源
|-- archive/              <-- 归档文件夹
|-- frontend-build/       <-- 前端构建文件夹
`-- venv/                 <-- Python虚拟环境
```

## AI模型与API集成
- 支持**DeepSeek API**作为首选AI引擎
- 支持**OpenAI API**作为备选方案
- 通过`ai_service.py`处理自然语言转SQL和数据洞察生成
- 支持切换不同的模型和API

## 数据库设计
主要表结构为`hotel_revenue`，包含字段：
- `id`: 唯一标识符
- `date`: 日期
- `channel`: 渠道名称
- `fee_type`: 费用类型
- `room_nights`: 间夜数
- `revenue`: 收入金额

## 系统安全措施
- SQL注入防护：使用参数化查询
- 数据验证：前后端双重验证
- 敏感信息：API密钥通过环境变量管理